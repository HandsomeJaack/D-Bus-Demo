# Инструкция по сборке

Ставим все зависимости, описанные в ```reqs.txt```. Далее делаем ```make```.

В фоне запускаем ```./daemon &``` и запускаем демо-приложение ```./demo```. Чтобы проверить работу демки, перетащите файл с необходимым расширением в окно, в нем появятся кнопки с программами, нажав на них, файл откроется в соответсвующей программе.

## Общение через терминал

С демоном можно общаться через терменил посредством команды 

```bash 
busctl --user call net.handsome.Daemon /net/handsome/Daemon net.handsome.Daemon <имя_метода> <тип_входных_параметров> <входные параметры>
```

Например, для добавления записи в базу данных:
	
```bash
busctl --user call net.handsome.Daemon /net/handsome/Daemon net.handsome.Daemon Add ss /usr/bin/gedit .cpp
```

**Внимание!** Добавление в базу происходит строго по одному формату за команду!

Удаление из базы:
	
```bash
busctl --user call net.handsome.Daemon /net/handsome/Daemon net.handsome.Daemon Delete s /usr/bin/gedit
```

Удаляет все вхождения программы в базу.

## db_api.h

Включает в себя следующие функции:
```c 
	int add_prorgam(char *<полный_путь_до_программы>, char *<один_из поддерживаемых форматов>
```
 - возвращет 0 в случае успешного добавления в базу с именем ```extensions.db```
 
 **UPD:** под полным путем до программы/файла подразумевается путь из корневой директории ```~```.
 
 ```c
 	int delete_program(char *<полный_путь_до_программы>)
```
 - возвращает 0 в случае успешного удаления всех упоминаний о программе в базе данных ```extensions.db```
 
 ```c
 	char** select_program(char* <искомый_формат>)
```
- возвращает массив строк с именами полными путями программ, поддерживающих искомый формат, и содержащихся в базе данных ```extensions.db```, в случае отсутствия упоминаия о формате или программе в базе, возвращает пустой массив

```c
	int run(char* <полный_путь_до_программы>, сhar* <полный_путь_до файла>)
```
- возвращает 0 в случае успешного запуска программы.
